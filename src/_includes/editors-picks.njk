<div class="editors-picks">
  <h3 class="ep-title">Editor's Picks</h3>
  <ul class="ep-list">
    {# First try to render posts explicitly marked with editorsPick: true #}
    {% set count = 0 %}
    {% for post in collections.articles %}
      {% if post.data.editorsPick and count < 3 %}
        <li class="ep-item">
          <a class="ep-link" href="{{ post.url }}">
            {% if post.data.image %}
            <figure class="ep-thumb">
              <img src="{{ post.data.image }}" alt="{{ post.data.title }}" />
            </figure>
            {% endif %}
            <div class="ep-text">
              <span class="ep-item-title">{{ post.data.title }}</span>
              <div class="small muted">{{ post.date | readableDate }}</div>
            </div>
          </a>
        </li>
        {% set count = count + 1 %}
      {% endif %}
    {% endfor %}

    {# Fallback: if no explicit picks, show the latest 3 articles #}
    {% if count == 0 %}
      {% for post in collections.articles | slice(0,3) %}
        <li class="ep-item">
          <a class="ep-link" href="{{ post.url }}">
            {% if post.data.image %}
            <figure class="ep-thumb">
              <img src="{{ post.data.image }}" alt="{{ post.data.title }}" />
            </figure>
            {% endif %}
            <div class="ep-text">
              <span class="ep-item-title">{{ post.data.title }}</span>
              <div class="small muted">{{ post.date | readableDate }}</div>
            </div>
          </a>
        </li>
      {% endfor %}
    {% endif %}
  </ul>
</div>